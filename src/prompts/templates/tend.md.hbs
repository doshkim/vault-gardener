# Tend — Lifecycle & Enrichment

Review note lifecycle, organize semantic memory into topic folders, and progressively
enrich sparse notes. Pruning, organizing, and nurturing the knowledge garden.

**No information is ever deleted** — only reorganized, enriched, and connected.

## Safety

- **Never delete** — only reorganize, enrich, connect
- **Skip recently modified** — if file modified in last 5 min, skip it
- **Never touch protected paths**: {{#each protected}}`{{this}}/` {{/each}}

## Instructions

Read `.gardener/context.md` for vault structure and rules.

---

## Step 1 — Stale Note Review

Non-destructive review. **Never auto-archive or delete.**

| Condition | Action |
|-----------|--------|
| `seed` + 0 incoming links + >14 days old | Add review comment. Find 2-3 related notes and add WikiLinks. |
| `seed` + >30 days old | Flag in summary: "Needs attention — develop or connect." |
| Event journal with all Store items processed | Set `status: consolidated`. |

## Step 1.1 — Semantic Memory Organizer

Auto-organize `{{folders.resources}}/` into topic subfolders.

1. **Scan loose files** in `{{folders.resources}}/` root
2. **Detect topic** from title, tags, content, `topic` frontmatter
3. **Route to matching subfolder:**
   - Subfolder exists → move file, update `topic` frontmatter
   - No subfolder but {{auto_grow.resources}}+ loose files share topic → create subfolder + index note
   - Topic unclear or < {{auto_grow.resources}} matches → leave in root
4. **Update index notes** with file links
5. **Never move files OUT of existing subfolders**

**Topic taxonomy:**
{{#each topics}}
- **{{@key}}**: {{#each this}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}
{{/each}}

New topic categories auto-created when {{auto_grow.resources}}+ notes share keywords not covered above.

**Batch limit:** Max {{limits.organize_per_run}} files organized per run.

{{#if features.todo_lifecycle}}
---

## Step 1.5 — Todo Lifecycle Management

Manage the lifecycle of `- [ ]` action items across daily, weekly, and monthly journals.
One canonical checkbox per todo at any time — items carry forward with gentle accountability.

**Scope:** Only `- [ ]` items in daily journal body text and `## Action Items` sections of event journals (meetings).
**Excluded:** Items inside `## Store`, `## Commitments`, `## Open Questions`, or `## Goals` sections (these have their own lifecycle systems).

### 1.5.1 — Reconciliation Sweep

Read memory's `## Todo Lifecycle` section (if it exists). For each tracked forward:
1. Check the origin file — if it now shows `- [x]` (user re-added checkbox and completed), mark resolved
2. Check the destination file — if it shows `- [x]`, mark resolved
3. Update memory: move resolved items from `### Active Forwards` to `### Recently Resolved`

### 1.5.2 — Forward from Dailies

Scan daily and event journals from completed weeks. For each in-scope `- [ ]` item:

**Dated items (have `due: YYYY-MM-DD`):**
- If 3+ days past due → forward to weekly

**Undated items:**
- If the item's week has ended → forward to weekly

**Forwarding action:**
1. In the origin file: remove the checkbox, add italic forwarding note:
   `- Send requirements to Jane — *carried forward to [[YYYY-WNN]]*`
2. In the weekly's `## Carrying Forward` section, add:
   `- [ ] Send requirements to Jane — from [[origin-date]] (due: YYYY-MM-DD)`

**Deduplication:** Before adding to any destination, check for an existing item with the same `from [[...]]` origin. If found, update the week counter instead of duplicating.

### 1.5.3 — Weekly-to-Weekly Forwarding

For each `- [ ]` item in the previous weekly's `## Carrying Forward` section:
1. In the old weekly: remove the checkbox, add forwarding note:
   `- Send requirements to Jane — *carried forward to [[YYYY-WNN]]*`
2. In the new weekly's `## Carrying Forward`, add with incremented week counter:
   `- [ ] Send requirements to Jane — from [[origin-date]] (due: YYYY-MM-DD, week N)`

### 1.5.4 — Staleness Escalation

{{#if (eq persona "analytical")}}Tone: Terse. State facts: "Carrying forward: 3 items. Oldest: 2 weeks."{{/if}}
{{#if (eq persona "reflective")}}Tone: Thoughtful. "Three items have been traveling with you. Worth asking: which still matter?"{{/if}}
{{#if (eq persona "coach")}}Tone: Prescriptive. "3 items carrying forward. Recommend blocking time for the oldest two."{{/if}}

| Week Count | Action |
|-----------|--------|
| week 3 | Add `> [!question] Still relevant? This item has been carrying forward for 3 weeks.` callout above the item |
| week 4 | Remove from weekly. Add to monthly journal's `## Long-Running Items` section |
| week 6 | Strikethrough in monthly: `- ~~Send requirements to Jane~~ — dropped after 6 weeks (from [[origin-date]])`. Remove from memory |

{{#if features.commitment_tracker}}
### Commitment Cross-Reference

When both `todo_lifecycle` and `commitment_tracker` are enabled, add an `> [!info] Commitment check` callout in the weekly listing overdue commitments from person notes — summary only, no duplicate checkboxes.
{{/if}}

**Batch limit:** Max 20 todo lifecycle operations per run.

{{/if}}
---

## Step 2 — Journal Generation

Generate higher-level journal summaries when threshold data exists.

### Weekly Summary
- **Trigger**: 3+ daily entries exist for the week
- **Location**: `{{folders.journal}}/YYYY/{{journal.journal_subfolders.weekly}}/YYYY-WNN.md`
- **Style**: {{journal.style.weekly}}
- **Sections**: Highlights, Decisions, Learnings, People, {{#if features.todo_lifecycle}}Carrying Forward{{else}}Open Items for Next Week{{/if}}
- **Links**: Back-links to each daily + event journal

### Monthly Summary
- **Trigger**: 2+ weekly entries exist for the month
- **Location**: `{{folders.journal}}/YYYY/{{journal.journal_subfolders.monthly}}/YYYY-MM.md`
- **Style**: {{journal.style.monthly}}
- **Sections**: Highlights, Goal Progress, Key Relationships, Knowledge Growth, Gardener Recommendations

### Quarterly Reflection
- **Trigger**: 2+ monthly entries exist for the quarter
- **Location**: `{{folders.journal}}/YYYY/{{journal.journal_subfolders.quarterly}}/YYYY-QN.md`
- **Style**: {{journal.style.quarterly}}
- **Sections**: Quarter in Review, Progress Against Themes, Goal Assessment, Key Learnings, Top Relationships, Gardener Recommendations

### Yearly Review
- **Trigger**: User sets themes in yearly note
- **Location**: `{{folders.journal}}/YYYY/{{journal.journal_subfolders.yearly}}/YYYY.md`
- **Style**: {{journal.style.yearly}}
- **Sections**: Themes, Goals & Plans, Progress Tracker, Key Events, Key Learnings, Gardener Recommendations
- **Lifecycle**: Created on Jan 1st (or init). Updated monthly. Comprehensive Q4 review.

---

## Step 3 — Progressive Enrichment Queue

Process sparse notes for enrichment:

1. Scan vault for candidates:
   - Notes with `status: seed` and content < 200 words
   - Notes with 0 outgoing WikiLinks
   - Resource notes missing `## Key Takeaways`
2. **Priority**: Notes referenced by more journals get enriched first
3. Process top {{limits.enrich_per_run}} items:
   - Extract key concepts and create/link resource notes
   - Add 3-5 WikiLinks to related notes
   - Expand thin sections
   - Promote `seed` → `growing` if substantially enriched
4. Report: "Enriched {count} notes, {remaining} remaining in queue"

---

## Commit (if git available)

```bash
git add -A && git commit -m "vault-gardener tend: {date} ({enriched} enriched, {organized} organized)"
```

---

## Output

Summary:
- **Stale review**: {flagged} notes flagged, {consolidated} journals consolidated
- **Organization**: {organized} files organized into topic subfolders
- **Journals**: {weekly} weekly, {monthly} monthly, {quarterly} quarterly generated
- **Enrichment**: {enriched} notes enriched, {remaining} remaining in queue
